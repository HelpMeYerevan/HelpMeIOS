//
//  UIImage.swift
//  help.me
//
//  Created by Karen Galoyan on 11/13/21.
//

import UIKit

extension UIImage {
    
    // MARK: Properties
    // MARK: Icons
    public static var iconActive: UIImage? { return UIImage(named: "icon_active") }
    public static var iconAddImage: UIImage? { return UIImage(named: "icon_add_image") }
    public static var iconArrowDown: UIImage? { return UIImage(named: "icon_arrow_down") }
    public static var iconArrowLeft: UIImage? { return UIImage(named: "icon_arrow_left") }
    public static var iconArrowRight: UIImage? { return UIImage(named: "icon_arrow_right") }
    public static var iconArrowUp: UIImage? { return UIImage(named: "icon_arrow_up") }
    public static var iconCalendar: UIImage? { return UIImage(named: "icon_calendar") }
    public static var iconCancel: UIImage? { return UIImage(named: "icon_cancel") }
    public static var iconCapturePhoto: UIImage? { return UIImage(named: "icon_capture_photo") }
    public static var iconChatSelected: UIImage? { return UIImage(named: "icon_chat_selected") }
    public static var iconChat: UIImage? { return UIImage(named: "icon_chat") }
    public static var iconCheckmark: UIImage? { return UIImage(named: "icon_check_mark") }
    public static var iconCheckmarkDeselected: UIImage? { return UIImage(named: "icon_checkmark_deselected") }
    public static var iconCheckmarkNotFullySelected: UIImage? { return UIImage(named: "icon_checkmark_not_fully_selected") }
    public static var iconCheckmarkSelected: UIImage? { return UIImage(named: "icon_checkmark_selected") }
    public static var iconClip: UIImage? { return UIImage(named: "icon_clip") }
    public static var iconClose: UIImage? { return UIImage(named: "icon_close") }
    public static var iconContactUs: UIImage? { return UIImage(named: "icon_contact_us") }
    public static var iconCreditCard: UIImage? { return UIImage(named: "icon_credit_card") }
    public static var iconDelete: UIImage? { return UIImage(named: "icon_delete") }
    public static var iconEmail: UIImage? { return UIImage(named: "icon_email") }
    public static var iconEmptyChat: UIImage? { return UIImage(named: "icon_empty_chat") }
    public static var iconEmptyNotifications: UIImage? { return UIImage(named: "icon_empty_notifications") }
    public static var iconEmptyWorks: UIImage? { return UIImage(named: "icon_empty_works") }
    public static var iconFacebook: UIImage? { return UIImage(named: "icon_facebook") }
    public static var iconFilters: UIImage? { return UIImage(named: "icon_filters") }
    public static var iconFlipCamera: UIImage? { return UIImage(named: "icon_flip_camera") }
    public static var iconGetLocation: UIImage? { return UIImage(named: "icon_get_location") }
    public static var iconGoogle: UIImage? { return UIImage(named: "icon_google") }
    public static var iconHistory: UIImage? { return UIImage(named: "icon_history") }
    public static var iconHomeSelected: UIImage? { return UIImage(named: "icon_home_selected") }
    public static var iconHome: UIImage? { return UIImage(named: "icon_home") }
    public static var iconInfo: UIImage? { return UIImage(named: "icon_info") }
    public static var iconLanguage: UIImage? { return UIImage(named: "icon_language") }
    public static var iconLinkedin: UIImage? { return UIImage(named: "icon_linkedin") }
    public static var iconLocation: UIImage? { return UIImage(named: "icon_location") }
    public static var iconMapSelected: UIImage? { return UIImage(named: "icon_map_selected") }
    public static var iconMap: UIImage? { return UIImage(named: "icon_map") }
    public static var iconMarkerSelected: UIImage? { return UIImage(named: "icon_marker_selected") }
    public static var iconMarker: UIImage? { return UIImage(named: "icon_marker") }
    public static var iconMessage: UIImage? { return UIImage(named: "icon_message") }
    public static var iconMessenger: UIImage? { return UIImage(named: "icon_messenger") }
    public static var iconMobile: UIImage? { return UIImage(named: "icon_mobile") }
    public static var iconNotification: UIImage? { return UIImage(named: "icon_notification") }
    public static var iconPhotoLibrary: UIImage? { return UIImage(named: "icon_photo_library") }
    public static var iconPlus: UIImage? { return UIImage(named: "icon_plus") }
    public static var iconProfileDefaultAvatar: UIImage? { return UIImage(named: "icon_profile_default_avatar") }
    public static var iconProfileFilled: UIImage? { return UIImage(named: "icon_profile_filled") }
    public static var iconProfileSelected: UIImage? { return UIImage(named: "icon_profile_selected") }
    public static var iconProfile: UIImage? { return UIImage(named: "icon_profile") }
    public static var iconRadioButtonBlack: UIImage? { return UIImage(named: "icon_radio_button_black") }
    public static var iconRadioButtonGrey: UIImage? { return UIImage(named: "icon_radio_button_grey") }
    public static var iconRadioButtonSelectedBlack: UIImage? { return UIImage(named: "icon_radio_button_selected_black") }
    public static var iconRadioButtonSelectedGrey: UIImage? { return UIImage(named: "icon_radio_button_selected_grey") }
    public static var iconScanPaymentCard: UIImage? { return UIImage(named: "icon_scan_payment_card") }
    public static var iconScanRetry: UIImage? { return UIImage(named: "icon_scan_retry") }
    public static var iconScanSelected: UIImage? { return UIImage(named: "icon_scan_selected") }
    public static var iconScan: UIImage? { return UIImage(named: "icon_scan") }
    public static var iconSearch: UIImage? { return UIImage(named: "icon_search") }
    public static var iconSendMessage: UIImage? { return UIImage(named: "icon_send_message") }
    public static var iconSettings: UIImage? { return UIImage(named: "icon_settings") }
    public static var iconSignOut: UIImage? { return UIImage(named: "icon_sign_out") }
    public static var iconStar: UIImage? { return UIImage(named: "icon_star") }
    public static var iconTag: UIImage? { return UIImage(named: "icon_tag") }
    public static var iconTelegram: UIImage? { return UIImage(named: "icon_telegram") }
    public static var iconTermsAndConditions: UIImage? { return UIImage(named: "icon_terms_and_conditions") }
    public static var iconVerifiedUser: UIImage? { return UIImage(named: "icon_verified_user") }
    public static var iconViber: UIImage? { return UIImage(named: "icon_viber") }
    public static var iconWalletWhite: UIImage? { return UIImage(named: "icon_wallet_white") }
    public static var iconWallet: UIImage? { return UIImage(named: "icon_wallet") }
    public static var iconWhatsapp: UIImage? { return UIImage(named: "icon_whatsapp") }

    // MARK: Images
    public static var imageBorderedButton: UIImage? { return UIImage(named: "image_bordered_button") }
    public static var imageExternalFrame: UIImage? { return UIImage(named: "image_external_frame") }
    public static var imageFilledButton: UIImage? { return UIImage(named: "image_filled_button") }
    public static var imageGradient: UIImage? { return UIImage(named: "image_gradient") }
    public static var imageInnerFrame: UIImage? { return UIImage(named: "image_inner_frame") }
    public static var imageLogoColored: UIImage? { return UIImage(named: "image_logo_colored") }
    public static var imageLogoWhite: UIImage? { return UIImage(named: "image_logo_white") }

    // MARK: System Images
    public static var imageTouchID: UIImage? { return UIImage(systemName: "touchid") }
    public static var imageFaceID: UIImage? { return UIImage(systemName: "faceid") }

    // MARK: Methods
    static public func imageWithColor(color: UIColor, size: CGSize) -> UIImage {
        let rect: CGRect = CGRect(x: 0, y: 0, width: size.width, height: size.height)
        UIGraphicsBeginImageContextWithOptions(size, false, 0)
        color.setFill()
        UIRectFill(rect)
        guard let image: UIImage = UIGraphicsGetImageFromCurrentImageContext() else { return UIImage() }
        UIGraphicsEndImageContext()
        return image
    }
    
    public func setCornerRadius(_ radius: CGFloat? = nil) -> UIImage? {
        let maxRadius = min(size.width, size.height) / 2
        let cornerRadius: CGFloat
        if let radius = radius, radius > 0 && radius <= maxRadius {
            cornerRadius = radius
        } else {
            cornerRadius = maxRadius
        }
        UIGraphicsBeginImageContextWithOptions(size, false, scale)
        let rect = CGRect(origin: .zero, size: size)
        UIBezierPath(roundedRect: rect, cornerRadius: cornerRadius).addClip()
        draw(in: rect)
        let image = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return image
    }
    
    public func orientationFixed() -> UIImage {
        if imageOrientation == .up {
            return self
        }
        var transform: CGAffineTransform = CGAffineTransform.identity
        switch imageOrientation {
        case .down, .downMirrored:
            transform = transform.translatedBy(x: size.width, y: size.height)
            transform = transform.rotated(by: CGFloat.pi)
        case .left, .leftMirrored:
            transform = transform.translatedBy(x: size.width, y: 0)
            transform = transform.rotated(by: CGFloat.pi / 2)
        case .right, .rightMirrored:
            transform = transform.translatedBy(x: 0, y: size.height)
            transform = transform.rotated(by: CGFloat.pi / -2)
        case .up, .upMirrored: break
        default: break
        }
        switch imageOrientation {
        case .upMirrored, .downMirrored:
            transform.translatedBy(x: size.width, y: 0)
            transform.scaledBy(x: -1, y: 1)
        case .leftMirrored, .rightMirrored:
            transform.translatedBy(x: size.height, y: 0)
            transform.scaledBy(x: -1, y: 1)
        case .up, .down, .left, .right: break
        default: break
        }
        if let cgImage = self.cgImage, let colorSpace = cgImage.colorSpace,
            let ctx: CGContext = CGContext(data: nil, width: Int(size.width), height: Int(size.height), bitsPerComponent: cgImage.bitsPerComponent, bytesPerRow: 0, space: colorSpace, bitmapInfo: CGImageAlphaInfo.premultipliedLast.rawValue) {
            ctx.concatenate(transform)
            switch imageOrientation {
            case .left, .leftMirrored, .right, .rightMirrored:
                ctx.draw(cgImage, in: CGRect(x: 0, y: 0, width: size.height, height: size.width))
            default:
                ctx.draw(cgImage, in: CGRect(x: 0, y: 0, width: size.width, height: size.height))
            }
            if let ctxImage: CGImage = ctx.makeImage() {
                return UIImage(cgImage: ctxImage)
            } else {
                return self
            }
        } else {
            return self
        }
    }
    
    static public func from(color: UIColor) -> UIImage {
        let rect = CGRect(x: 0, y: 0, width: 1, height: 1)
        UIGraphicsBeginImageContext(rect.size)
        let context = UIGraphicsGetCurrentContext()
        context!.setFillColor(color.cgColor)
        context!.fill(rect)
        let img = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return img!
    }
    
    public var thumbnail: UIImage {
        let newHeight: CGFloat = 400
        let scale = newHeight / self.size.height
        let newWidth = self.size.width * scale
        let newSize = CGSize(width: newWidth, height: newHeight)
        let renderer = UIGraphicsImageRenderer(size: newSize)

        return renderer.image { _ in
            self.draw(in: CGRect(origin: .zero, size: newSize))
        }
    }
}
